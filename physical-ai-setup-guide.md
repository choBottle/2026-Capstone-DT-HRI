# 

---

# Physical AI μ‹μ¤ν… κ°€λ™ κ°€μ΄λ“ (Team Guide)

μ΄ κ°€μ΄λ“λ” λ΅λ΄‡(RoboMaster EP), λΌμ¦λ² λ¦¬νμ΄(Relay), λ©”μΈ λ…ΈνΈλ¶(Brain/Hub/DB) κ°„μ ν†µν•© μ‹μ¤ν…μ„ κ°μΈμ ν™κ²½μ—μ„ κµ¬μ¶•ν•κ³  μ‹¤ν–‰ν•λ” λ°©λ²•μ„ λ‹¤λ£Ήλ‹λ‹¤.

## 1. μ‚¬μ „ μ¤€λΉ„ μ‚¬ν•­

μ‹μ¤ν… κ°€λ™ μ „, κ° μ¥μΉμ— μ•„λ λ„κµ¬λ“¤μ΄ μ„¤μΉλμ–΄ μμ–΄μ•Ό ν•©λ‹λ‹¤.

- **λ©”μΈ λ…ΈνΈλ¶:** Docker Desktop, Python 3.10+
- **λΌμ¦λ² λ¦¬νμ΄:** Docker, Docker Compose (μ„¤μΉ ν•„μ)
- **λ„¤νΈμ›ν¬:** λ¨λ“  μ¥μΉλ” **λ™μΌν• μ™€μ΄νμ΄(κ³µμ κΈ°)**μ— μ—°κ²°λμ–΄μ•Ό ν•©λ‹λ‹¤.
**μ½”λ“ λ‚΄ ipλ” κ°μΈ ν™κ²½μ— λ§κ² μμ • μ¶”μ²**!!
    - λ΅λ΄‡ IP: `192.168.50.31` (μμ‹)
    - λΌμ¦λ² λ¦¬νμ΄ IP: `192.168.50.130` (μμ‹)
    - λ…ΈνΈλ¶ IP: `192.168.50.39` (μμ‹)

---

## 2. λΌμ¦λ² λ¦¬νμ΄ μ„¤μ • (Relay μ»¨ν…μ΄λ„)

λΌμ¦λ² λ¦¬νμ΄λ” λ΅λ΄‡μ UDP ν¨ν‚·μ„ λ…ΈνΈλ¶μΌλ΅ μ¤‘κ³„ν•λ” μ—­ν• μ„ ν•©λ‹λ‹¤.

### **A. μ΄λ―Έμ§€ λΉλ“ λ° ν—λΈ ν‘Έμ‹ (λ…ΈνΈλ¶μ—μ„ μν–‰)**

λ§¤λ² νμ΄μ—μ„ λΉλ“ν•λ©΄ λλ¦¬λ―€λ΅, λ…ΈνΈλ¶μ—μ„ λΉλ“ ν›„ Docker Hubμ— μ¬λ ¤μ„ νμ΄μ—μ„ λ‹¤μ΄(Pull)λ°›λ” λ°©μ‹μ΄ ν¨μ¨μ μ…λ‹λ‹¤. Docker hub κ°μΈ κ³„μ • μƒμ„± μ¶”μ².

```bash
# 1. λ¦΄λ μ΄ ν΄λ”λ΅ μ΄λ™
cd physical_ai/raspberry_relay

# 2. λΌμ¦νλ¦¬νμ΄μ© μ»΄ν¬μ¦ νμΌ μ „μ†΅
# ν•μ‹: scp [νμΌλ…] [νμ΄κ³„μ •]@[νμ΄IP]:[λ³µμ‚¬ν• κ²½λ΅]
scp physical_ai/raspberry_relay/docker-compose.yml [νμ΄κ³„μ •]@[νΈμ¤νΈμ΄λ¦„]:~/physical_ai/raspberry_relay/

# 3. λΉλ“ λ° hubλ΅ push(Multi-platform λΉλ“ κ¶μ¥: νμ΄λ” ARM κµ¬μ΅°μ΄λ―€λ΅)
docker buildx build --platform linux/arm64 -t [λ‹Ήμ‹ μ_λ„μ»¤_μ•„μ΄λ””]/total_relay:latest --push .
```

### **B. λΌμ¦λ² λ¦¬νμ΄μ—μ„ μ‹¤ν–‰**

λΌμ¦λ² λ¦¬νμ΄μ— μ ‘μ†(SSH)ν•μ—¬ μ»¨ν…μ΄λ„λ¥Ό μ‹¤ν–‰ν•©λ‹λ‹¤.

```bash
# 1. ν”„λ΅μ νΈ ν΄λ” μ΄λ™(μ—†μΌλ©΄ mkdir μƒμ„±)
cd ~/physical_ai/raspberry_relay
# μ—λ¬ λ°©μ§€: ls λ…λ Ήμ–΄λ΅ μ „μ†΅λ compose νμΌ ν™•μΈ

# 1. μµμ‹  μ΄λ―Έμ§€ κ°€μ Έμ¤κΈ°
docker pull [λ‹Ήμ‹ μ_λ„μ»¤_μ•„μ΄λ””]/total_relay:latest

# 2. μ‹¤ν–‰ (λ„¤νΈμ›ν¬ host λ¨λ“ ν•„μ)
docker run -d --name total_relay --network host --restart always [λ‹Ήμ‹ μ_λ„μ»¤_μ•„μ΄λ””]/total_relay:latest
```

---

## π’» 3. λ©”μΈ λ…ΈνΈλ¶ μ„¤μ • (Brain, Hub, DB)

λ…ΈνΈλ¶μ€ λ°μ΄ν„° λ¶„μ„, μ„λ²„ μ΄μ, DB μ €μ¥μ„ λ‹΄λ‹Ήν•©λ‹λ‹¤.

### **A. ν™κ²½ λ³€μ ν™•μΈ (`docker-compose.yml`)**

ν€μ› κ°μμ IPκ°€ λ‹¤λ¥Ό μ μμΌλ―€λ΅ μ•„λ ν•­λ©μ„ λ°λ“μ‹ μμ •ν•΄μ•Ό ν•©λ‹λ‹¤.

- `ROBOT_IP`: λΌμ¦λ² λ¦¬νμ΄μ IP μ…λ ¥(λ…ΈνΈλ¶μ΄ λΌμ¦λ² λ¦¬νμ΄λ¥Ό λ΅λ΄‡μΌλ΅ μ†μ—¬ μΈμ‹ν•΄μ•Ό ν•κΈ°μ— μΌλ‹¨ μ΄λ ‡κ² μ„¤μ •, μ§κ΄€μ„±μ΄ λ–¨μ–΄μ§„λ‹¤λ©΄ ν–¥ν›„ μμ • μ§„ν–‰)
- `DB_PASS`: μ„¤μ •ν• DB λΉ„λ°€λ²νΈ νμΌλΌλ¦¬ μ„λ΅ μΌμΉ ν™•μΈ(μ„μ‹ DB, ν–¥ν›„ DBν€ μ—°κµ¬ λ‚΄μ©κ³Ό ν•©μΉ  μμ •)

### **C. μ‹μ¤ν… μΌκ΄„ μ‹¤ν–‰**

λΌμ¦λ² λ¦¬νμ΄μ© μ»¨ν…μ΄λ„μ™€ go1 μ»¨ν…μ΄λ„(ν–¥ν›„ κ°λ° μ§„ν–‰ ν›„ μ¶”κ°€)λ” μ „μ²΄ compose νμΌμ—μ„ μ μ™Έν•΄λ’€μΌλ‹ physical_ai ν΄λ”μ—μ„ λ”°λ΅ λ¶„λ¥ μ•ν•κ³  up λ…λ Ήμ–΄ μ¨λ„ κ΄μ°®μµλ‹λ‹¤.

```bash
# λ¨λ“  μ»¨ν…μ΄λ„ λΉλ“ λ° λ°±κ·ΈλΌμ΄λ“ μ‹¤ν–‰(physical_ai ν΄λ”μ—μ„)
docker compose up -d --build
```

---

## 4. μ •μƒ μ‘λ™ ν™•μΈ μμ„ (Troubleshooting)

μ»¨ν…μ΄λ„κ°€ λ¬ ν›„, μ•„λ μμ„λ€λ΅ λ΅κ·Έλ¥Ό ν™•μΈν•μ—¬ μ—°κ²° μƒνƒλ¥Ό μ κ²€ν•©λ‹λ‹¤.

### **Step 1. DB μ—°κ²° ν™•μΈ**

DBκ°€ μ •μƒμ μΌλ΅ μƒμ„±λμ—λ”μ§€ λ¨Όμ € ν™•μΈν•©λ‹λ‹¤.

```bash
docker exec -it robot_db psql -U admin -d robot_db -c "\dt"
```

### **Step 2. Hub μ„λ²„ λ°μ΄ν„° μμ‹  ν™•μΈ**

λΈλ μΈ(Brain)μΌλ΅λ¶€ν„° μ •μ λ λ°μ΄ν„°κ°€ ν—λΈλ΅ λ“¤μ–΄μ¤λ”μ§€ ν™•μΈν•©λ‹λ‹¤.

```bash
docker logs -f hub_server
# μ¶λ ¥ μ: π“¥ [Hub] Received: battery data from EP01_CHASSIS_01
```

### **Step 3. μµμΆ… DB μ €μ¥ ν™•μΈ**

μ‹¤μ λ΅ λ°μ΄ν„°κ°€ ν…μ΄λΈ”μ— μ“μ΄κ³  μλ”μ§€ μΏΌλ¦¬λ¥Ό λ‚ λ ¤λ΄…λ‹λ‹¤.

```bash
docker exec -it robot_db psql -U admin -d robot_db -c "SELECT * FROM robot_telemetry ORDER BY created_at DESC LIMIT 5;"
```

μ •ν™•ν• μ¶λ ¥ λ‚΄μ©μ€ **ν™•μΈμ© ν…μ¤νΈ μ΄μμ— ν…μ¤νΈ κ²°κ³Ό μ°Έκ³ **

---

## μ£Όμ μ‚¬ν•­ λ° ν

1. **IP λ§¤μΉ­:** λ΅λ΄‡-νμ΄-λ…ΈνΈλ¶μ IPκ°€ ν•λ‚λΌλ„ μ–΄κΈ‹λ‚λ©΄ ν†µμ‹ μ΄ λμ§€ μ•μµλ‹λ‹¤. **IPμ£Όμ†λ¥Ό κΌ­ ν™•μΈ**ν•λ” κ±Έ μ¶”μ²λ“λ¦½λ‹λ‹¤ .
2. **λ°©ν™”λ²½:** λ…ΈνΈλ¶μ λ°©ν™”λ²½μ΄ 5000λ²(Hub), 5432λ²(DB) λ“± μ‚¬μ©ν•λ” ν¬νΈλ¥Ό λ§‰κ³  μμ§€ μ•μ€μ§€ ν™•μΈν•μ„Έμ”.
3. **μΆ…λ£ μ‹:** μ‹μ¤ν…μ„ λ„κ³  μ‹¶μ„ λ•λ” `docker compose stop`μ„ μ‚¬μ©ν•κ³ , μ™„μ „ν μ‚­μ ν•κ³  μ‹¶μ„ λ•λ§ `docker compose down`μ„ μ‚¬μ©ν•μ„Έμ”.
