# [EP01 Team] UDP Direct Control & ROS2 Integration Guide

ì´ ë¬¸ì„œëŠ” RoboMaster EP ë¡œë´‡ì„ ê³ ë„í™”ëœ ROS2 í™˜ê²½ê³¼ í†µí•©í•˜ê³ , ë¼ì¦ˆë² ë¦¬íŒŒì´ì˜ ìžì›ì„ ìµœì†Œí™”í•˜ë©´ì„œ ì •ë°€ ì œì–´ë¥¼ ë‹¬ì„±í•˜ê¸° ìœ„í•œ ì§€ì¹¨ìž…ë‹ˆë‹¤.

## 1. í•˜ì´ë¸Œë¦¬ë“œ ì œì–´ ì•„í‚¤í…ì²˜

ìš°ë¦¬ ì‹œìŠ¤í…œì€ í•˜ë“œì›¨ì–´ ì œì•½ ì¡°ê±´(Pi ëž¨ 1GB)ì„ ê·¹ë³µí•˜ê¸° ìœ„í•´ ì—­í• ì„ ë¶„ë‹´í•©ë‹ˆë‹¤.

- **Relay (Raspberry Pi):** ë¡œë´‡ì˜ UDP 40923 í¬íŠ¸ì™€ ì§ì ‘ í†µì‹ . `socket` ë¼ì´ë¸ŒëŸ¬ë¦¬ë§Œ ì‚¬ìš©í•˜ëŠ” **Non-ROS** í™˜ê²½ìž…ë‹ˆë‹¤.
- **Brain Worker (Laptop):** `ros:foxy` ë„ì»¤ ì»¨í…Œì´ë„ˆ êµ¬ë™. ë¦´ë ˆì´ë¡œë¶€í„° ë°›ì€ Raw ë°ì´í„°ë¥¼ **ROS2 Topic**ìœ¼ë¡œ ë°œí–‰(Publish)í•˜ê³ , ROS2 íŒ¨í‚¤ì§€ë¥¼ í™œìš©í•´ ë³µìž¡í•œ ê²½ë¡œ ê³„íšì´ë‚˜ ì„¼ì„œ ìœµí•©ì„ ì²˜ë¦¬í•©ë‹ˆë‹¤.

---

## 2. EP01 ë¡œë´‡ ì£¼ìš” ì‚¬ì–‘ì„œ (Specifications)

í˜„ìž¬ í”„ë¡œì íŠ¸ì—ì„œ í™œìš© ì¤‘ì¸ RoboMaster EPì˜ í•µì‹¬ ì‚¬ì–‘ìž…ë‹ˆë‹¤. (í˜„ìž¬ ì—°êµ¬ ë‚´ìš©ë§Œ ê°„ë‹¨ížˆ ì •ë¦¬, ì´í›„ ì—°êµ¬ë¡œ ì¶”ê°€ ë° ê°œì„ )

| **í•­ëª©** | **ìƒì„¸ ì‚¬ì–‘** | **ë¹„ê³ ** |
| --- | --- | --- |
| **ëª¨ë¸ëª…** | DJI RoboMaster EP | êµìœ¡ìš©/ì—°êµ¬ìš© ë¡œë´‡ |
| **ì œì–´ ì¸í„°íŽ˜ì´ìŠ¤** | UDP/TCP (Plain Text & Hex í”„ë¡œí† ì½œ) | ì§ì ‘ íŒ¨í‚· ì œì–´ ë°©ì‹ ì‚¬ìš© |
| **êµ¬ë™ ë°©ì‹** | ë©”ì¹´ë„˜ íœ  (Mecanum Wheel) | ì „í›„ì¢Œìš° 360ë„ í‰í–‰ ì´ë™ ê°€ëŠ¥ |
| **ì„¼ì„œ êµ¬ì„±** | ì¹´ë©”ë¼, 6ì¶• IMU, TOF ê±°ë¦¬ ì„¼ì„œ, ížˆíŠ¸ ê°ì§€ê¸° ë“± | ë°ì´í„° íŒŒì‹± ëŒ€ìƒ |
| **í†µì‹  í¬íŠ¸** | 40923 (ëª…ë ¹/ìƒíƒœ ìˆ˜ì‹ ìš©) | ë¼ì¦ˆë² ë¦¬íŒŒì´ ì ‘ì† í¬íŠ¸ |
| **ì•¡ì¶”ì—ì´í„°** | ë¸ŒëŸ¬ì‹œë¦¬ìŠ¤ DC ëª¨í„° (M3508-P19) | ìƒ¤ì‹œ ë° ì§ë²Œ ì œì–´ìš© |

---

## 3. í•µì‹¬ ê°œë°œ ê³¼ì œ

### **A. ROS2 Foxy íŒ¨í‚¤ì§€ í™œìš© (Laptop Server)**

ë…¸íŠ¸ë¶ì— ë–  ìžˆëŠ” `ep01_worker` ì»¨í…Œì´ë„ˆëŠ” ë‹¤ìŒ ì—­í• ì„ ìˆ˜í–‰í•©ë‹ˆë‹¤.

1. **ë°ì´í„° ë¸Œë¦¿ì§€:** Hubë¡œë¶€í„° ë°›ì€ JSON ë°ì´í„°ë¥¼ ROS2 ë©”ì‹œì§€ íƒ€ìž…(`sensor_msgs/BatteryState`, `nav_msgs/Odometry` ë“±)ìœ¼ë¡œ ë³€í™˜í•˜ì—¬ ë°œí–‰í•©ë‹ˆë‹¤.
2. **ROS2 ë¼ì´ë¸ŒëŸ¬ë¦¬ í™œìš©:** `RoboMaster SDK for ROS2`ì˜ ë¡œì§ì´ë‚˜ ì˜¤í”ˆì†ŒìŠ¤ ë‚´ë¹„ê²Œì´ì…˜ íŒ¨í‚¤ì§€(`Nav2`)ë¥¼ í™œìš©í•˜ì—¬ ë¡œë´‡ì˜ ìžìœ¨ ì£¼í–‰ ì•Œê³ ë¦¬ì¦˜ì„ í…ŒìŠ¤íŠ¸í•©ë‹ˆë‹¤.
3. **ëª…ë ¹ ìƒì„±:** ROS2 í† í”½ìœ¼ë¡œ ë“¤ì–´ì˜¤ëŠ” ì œì–´ ëª…ë ¹(`geometry_msgs/Twist`)ì„ EP01 ì „ìš© UDP ë¬¸ìžì—´ ëª…ë ¹ìœ¼ë¡œ ì—­ì¹˜í™˜í•˜ì—¬ ë¦´ë ˆì´ë¡œ ë³´ëƒ…ë‹ˆë‹¤.

### **B. í…”ë ˆë©”íŠ¸ë¦¬ íŒŒì‹± ê³ ë„í™”**

- **ê³¼ì œ:** ë¡œë´‡ì´ ë±‰ëŠ” `chassis push position`, `gimbal push attitude` ë“±ì˜ í…ìŠ¤íŠ¸ë¥¼ ì‹¤ì‹œê°„ìœ¼ë¡œ ë¶„í•´í•©ë‹ˆë‹¤.
- **ìœ„ì¹˜:** `physical_ai/main_server/ep01_worker.py` (ë˜ëŠ” Brain Worker ì˜ì—­)

---

## 4. ë¼ì¦ˆë² ë¦¬íŒŒì´ ì¤€ìˆ˜ ì‚¬í•­ (Resource Management)

- **No ROS2 on Pi:** ë¼ì¦ˆë² ë¦¬íŒŒì´ì—ëŠ” ROS2 í™˜ê²½ì„ êµ¬ì¶•í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤. 1GB ëž¨ì—ì„œ ROS2 ë…¸ë“œë¥¼ ì‹¤í–‰í•˜ëŠ” ê²ƒì€ ì‹œìŠ¤í…œ ë‹¤ìš´ì˜ ì£¼ì›ì¸ìž…ë‹ˆë‹¤.
- **Plain UDP Relay:** íŒŒì´ì˜ `total_relay`ëŠ” ì˜¤ì§ **ë°ì´í„° ì „ë‹¬ìž** ì—­í• ì—ë§Œ ì§‘ì¤‘í•©ë‹ˆë‹¤.
- **í¬íŠ¸ ê°œë°©:** ì»¨í…Œì´ë„ˆ ì‹¤í–‰ ì‹œ ë¡œë´‡ê³¼ì˜ UDP í†µì‹ ì„ ìœ„í•´ í˜¸ìŠ¤íŠ¸ ëª¨ë“œ(`-network host`)ë¥¼ ë°˜ë“œì‹œ ì‚¬ìš©í•˜ì„¸ìš”.

---

## 5. í˜‘ì—…ì„ ìœ„í•œ ë°ì´í„° ê·œê²©

ROS2 ë…¸ë“œì—ì„œ ê°€ê³µëœ ë°ì´í„°ëŠ” ìµœì¢…ì ìœ¼ë¡œ ì•„ëž˜ í˜•ì‹ìœ¼ë¡œ Hubì— ì „ë‹¬ë˜ì–´ì•¼ Unity/Web íŒ€ì´ ì‹œê°í™”í•  ìˆ˜ ìžˆìŠµë‹ˆë‹¤.

JSON

```json
{
  "robot_id": "EP01_CHASSIS_01",
  "robot_type": "EP01",
  "type": "odom",
  "val": { "x": 1.25, "y": 0.32, "yaw": 45.0 }
}
```

---

**ðŸ’¡ EP01íŒ€ì—ê²Œ ì „ë‹¬í•  ë©”ì‹œì§€:**

> "ë¡œë´‡ì˜ ë‚ ê²ƒ(Raw)ì¸ UDP í†µì‹ ê³¼ í˜„ëŒ€ì ì¸ ë¡œë´‡ ìš´ì˜ì²´ì œ(ROS2)ë¥¼ ì—°ê²°í•˜ëŠ” 'ê°€êµ' ì—­í• ì„ í•©ë‹ˆë‹¤. ë¼ì¦ˆë² ë¦¬íŒŒì´ëŠ” ê°€ë³ê²Œ ìœ ì§€í•˜ë˜, ì„œë²„ ì»¨í…Œì´ë„ˆ ì•ˆì—ì„œëŠ” ROS2ì˜ ê°•ë ¥í•œ íŒ¨í‚¤ì§€ë“¤ì„ ë§ˆìŒê» í™œìš©í•˜ì—¬ ë¡œë´‡ì˜ ì§€ëŠ¥ì„ ë†’ì—¬ì£¼ì„¸ìš”."
> 

---

###
